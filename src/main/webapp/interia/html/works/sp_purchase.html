<!DOCTYPE html>
<html>

<head>
    <title>구매하기</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/header_move.css">
    <link rel="stylesheet" href="../../css/works/sp_form_purchase_commissioned.css">
    <link rel="stylesheet" type="text/css" href="../../css/works/sp_purchase.css">

    <title>제작 의뢰하기</title>
</head>

<body>
    <header id="header">

    </header>

    <div class="sp-container" style="margin-top: 7.5em;">


        <form class="form-horizontal">
            <div id="" class="sp-form-botton">
                <!-- 여기는 제작 의뢰하기 관련 폼 -->
                <!--  -->
                <div class="sp-sb-header2">
                    <div class="sp-sb-h-name">
                        <h5 class="sp-title">주문 결제하기</h5>
                        <!-- <p>장바구니</p> -->
                    </div>
                    <div class="sp-sb-h-nav">
                        <p>장바구니&ensp;>&ensp;<b>주문결제</b>&ensp;>&ensp;주문완료</p>
                    </div>
                </div>
                <!-- sp-sb-header2 -->

                <!-- id 부분은 나중에 DB 용으로 남겨두었다. -->
                <div id="" class="form-group">
                    <table class="table sp-table-sub">
                        <thead style="background:#eee;">
                            <th class="sp-table-left" style="width:80%;border-bottom: 1px solid gray;border-top:1px solid gray">주문 스토어 : <span style="color:#ffc001">(판매자사이트명)</span></th>
                            <th class="sp-table-right sp-table-center" style="border-bottom: 1px solid gray;">
                                <font></font>배송비</th>
                        </thead>
                        <!-- 이부분은 반복문으로 처리 할 것! -->
                        <tbody>
                            <tr>
                                <td class="sp-table-left ">
                                    <div class="col-sm-10 row" style="vertical-align: middle">
                                        <div class="sp-product-image col-sm-1">
                                            <img src="../../images/main/beststore01.png" width="100px" height="100px">
                                        </div>
                                        <div class="sp-product-store col-sm-7">
                                            <!--차후에 조건문 추가할 것! width 길이의 따라 줄바꿈 실행 하도록!! -->
                                            [비트공방] FLENCE 460 사이드 테이블_2Colors....<br> (티/블)FLENCE 460 사이드 테이블_2colors...
                                        </div>
                                        <div class="sp-price-store col-sm-4">
                                            15,900 원 | 수량 : 1
                                            <!-- 임의의 태그 지정 -->
                                        </div>
                                    </div>
                                </td>
                                <td class="sp-table-right" style="vertical-align: middle; text-align: center">
                                    선결제<br> xxxx원
                                </td>
                            </tr>
                        </tbody>
                        <!-- 여기까지 -->
                    </table>
                </div>
            </div>

            <!-- 여기는 배송지 정보 폼 -->
            <h5 class="sp-title sp-title-sub sp-margin-top">배송지 정보</h5>

            <div id="" class="sp-form-botton">
                <div class="form-group">
                    <div class="col-sm-10">
                        <label for="col-sm-2 control-label" class="col-sm-2 control-label">받는분 </label>
                        <input id="sp-recipient" type="text" class="col-sm-4 sp-input-height"> <br>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-10">
                        <label for="sp-zip-code" class="col-sm-2 control-label">우편번호 </label>
                        <input id="sp-zip-code" name="sp-zip-code" type="text" class="col-sm-2 control-label sp-input-height" readonly="true"> &nbsp;&nbsp;&nbsp;
                        <input type="button" onclick="execDaumPostCode()" class="btn sp-btn btn-sm sp-input-height" value="배송지찾기">
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-10">
                        <label class="col-sm-2 control-label">주소 </label>
                        <input id="sp-add-ress" name="sp-add-ress" type="text" class="col-sm-8 sp-input-height" style="margin-bottom:1em" readonly="true"> <br>
                        <label class="col-sm-2 control-label"></label>
                        <input id="sp-detail-add-ress" name="sp-detail-add-ress" type="text" class="col-sm-8 sp-input-height"> <br>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-10">
                        <label for="sp-delivery-phone" class="col-sm-2 control-label">휴대전화</label>
                        <input id="sp-delivery-phone" type="text" class="sp-input-phone sp-input-height"> &nbsp; - &nbsp;
                        <input id="sp-delivery-phone" type="text" class="sp-input-phone sp-input-height">&nbsp; - &nbsp;
                        <input id="sp-delivery-phone" type="text" class="sp-input-phone sp-input-height"> <br>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-10">
                        <label for="sp-delivery-memo" class="col-sm-2 control-label">배송 메모 </label>
                        <input type="text" id="sp-delivery-memo" class="col-sm-8 sp-input-height" placeholder="ex) 부재시 경비실에  맡겨주세요"> <br>
                    </div>
                </div>
            </div>
            
            <!-- script Layer 팝업 실행 (다음 주소 API) -->
            <!-- iOS에서는 position:fixed 버그가 있음, 적용하는 사이트에 맞게 position:absolute 등을 이용하여 top,left값 조정 필요 -->
            <div id="layer" style="display:none;position:fixed;overflow:hidden;z-index:1;-webkit-overflow-scrolling:touch;">
                    <img src="../../images/address_api/close.png" id="btnCloseLayer" style="cursor:pointer;position:absolute;right:-3px;top:-3px;z-index:1" onclick="closeDaumPostcode()" alt="닫기 버튼">
            </div>
    
            <script async="async" src='https://spi.maps.daum.net/imap/map_js_init/postcode.v2.js?autoload=false'></script>
            <script charset="UTF-8" type="text/javascript" src="http://t1.daumcdn.net/postcode/api/core/180619/1529384927473/180619.js"></script>
            <script src="../../js/sp_daum_add.js"></script>

                <!-- 여기는 주문자 정보 폼 -->
                <h5 class="sp-title sp-title-sub sp-margin-top">주문자 정보</h5>
                <div id="" class="sp-form-botton">
                    <div class="form-group">
                        <div class="col-sm-10">
                            <label for="sp-order-name" class="col-sm-2 control-label">이름 </label>
                            <input id="sp-order-name" type="text" class="col-sm-2 sp-input-height"> <br>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-10">
                            <label for="sp-emails" class="col-sm-2 control-label">이메일 </label>
                            <input id="sp-emails" type="text" class="col sp-input-email sp-input-height"> @
                            <input id="sp-emails" type="text" class="col sp-input-email sp-input-height"> <br>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-10">
                            <label for="sp-order-phone" class="col-sm-2 control-label">휴대전화 </label>
                            <input id="sp-delivery-phone" type="text" class="sp-input-phone sp-input-height"> &nbsp; - &nbsp;
                            <input id="sp-delivery-phone" type="text" class="sp-input-phone sp-input-height">&nbsp; - &nbsp;
                            <input id="sp-delivery-phone" type="text" class="sp-input-phone sp-input-height"> <br>
                            <div style="margin-top:0.625em">
                                <input type="checkbox" style="margin-left:7.1875em;"> sms 수신동의 <span class="sp-sms-agree">(배송 정보를 SMS로 보내드립니다.)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 여기는 결제 정보 폼 -->
                <h5 class="sp-title sp-margin-top">결제 정보</h5>
                <table class="table sp-table-sub">
                    <tr class="sp-table-pay-infomation">
                        <th class="table-secondary sp-table-left sp-table-pay-information-th ">총 상품금액</th>
                        <td class="sp-table-right"> <span id="All-Price">xxxxx</span> 원</td>
                    </tr>
                    <tr class="sp-table-pay-infomation">
                        <th class="table-secondary sp-table-pay-information-th sp-table-left">할인 쿠폰</th>
                        <td class="sp-table-right">사용 안함</td>
                    </tr>
                    <tr class="sp-table-pay-infomation">
                        <th class="table-secondary sp-table-pay-information-th sp-table-left">배송비</th>
                        <td class="sp-table-right"> <span id="All-Delivery">xxxx</span> 원</td>
                    </tr>
                    <tr class="sp-table-pay-infomation">
                        <th class="table-secondary sp-table-pay-information-th sp-table-left">총 결제금액</th>
                        <td class="sp-table-right"><span style="color:#ffc001"> <span id="All-Order">10000</span> 원</span></td>
                    </tr>
                    <tr class="sp-table-pay-infomation">
                        <th class="table-secondary sp-table-pay-information-th sp-table-left">결제 수단</th>
                        <td class="sp-table-right">
                            <!-- 
                            <input type="radio" name="chk_pay" value="카드 결제"> 카드 결제&nbsp;&nbsp;
                            <input type="radio" name="chk_pay" value="무통장 입금"> 무통장 입금&nbsp;&nbsp;
                            <input type="radio" name="chk_pay" value="휴대폰"> 휴대폰 &nbsp;&nbsp;<br>
                            -->
                            <input id="pay-apply" type="radio" name="chk_pay" value="카카오페이"> 카카오페이<br>
                            <input type="checkbox" name="agree"> 결제 진행 필수사항 동의<br>
                            <p class="sp-sms-agree">개인정보 제 3자 제공 및 결제대행 서비스 표준 이용약관 보기></p>
                        </td>
                    </tr>
                </table><br><br>

                <!-- 완료 시 결제하기 -->
                <p class="sp-privacy"><input id="kakatest" align="center" class="btn sp-submit-button btn-lg" value="결제하기"></p>
        </form>


    </div>

    <footer id="footer">
        
    </footer>
    <script src="../../node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../../js/common.js"></script>
    <script src="../../js/header.js"></script>
    <script src="../../js/footer.js"></script>
    <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.1.5.js"></script>
    
    <script>
    // 카카오 페이 결제 기능
    var IMP = window.IMP; // 생략가능
    IMP.init('imp56682020'); // 'iamport' 대신 부여받은 "가맹점 식별코드"를 사용
    
    $("#kakatest").click(() => {
    	IMP.request_pay({
            pg : 'kakao', // version 1.1.0부터 지원.
            pay_method : 'phone',
            merchant_uid : 'merchant_' + new Date().getTime(), // 주문 발생시간
            name : '주문명:결제테스트', // 상풍명
            amount : $("#All-Order").text()  // 총 주문 가격
            //m_redirect_url : '../main/index.html'
        }, function(rsp) {
            if ( rsp.success ) {
                var msg = '결제가 완료되었습니다.';
                msg += '고유ID : ' + rsp.imp_uid;
                msg += '상점 거래ID : ' + rsp.merchant_uid;
                msg += '결제 금액 : ' + rsp.paid_amount;
                msg += '카드 승인번호 : ' + rsp.apply_num;
                //location.href = "../main/index.html";
            } else {
                var msg = '결제에 실패하였습니다.';
                msg += '에러내용 : ' + rsp.error_msg;
            }
            alert(msg);
        });
    });
    </script>
</body>

</html>
